MODULE TextDemo;
IMPORT ;
IMPORT In, Out;
(*
 * Demo program for routine drawText()
 * Asks the user to enter a text, a wanted text height and colour,
 * and then draws this string onto the turtle screen. Places every
 * entered text to a new line.
 *)
(* Generated by Structorizer 3.30-06 *)
(*  *)
(* Copyright (C) 2019-10-10 Kay Gürtzig *)
(* License: GPLv3-link *)
(* GNU General Public License (V 3) *)
(* https://www.gnu.org/licenses/gpl.html *)
(* http://www.gnu.de/documents/gpl.de.html *)
(*  *)
VAR
  (* TODO: check and accomplish variable declarations *)
  y: INTEGER;
  (* Make sure the content is interpreted as string *)
  text: ???;	(* FIXME! *)
  height: ???;	(* FIXME! *)
  colour: ???;	(* FIXME! *)

PROCEDURE blank*(h: ???; colorNo: ???);
(*
 * Draws a blank for font height h, ignoring the colorNo
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  penUp();
  right(90);
  forward(width); (* color = ffffff *)
  left(90);
END blank;

PROCEDURE forward*(len: ???; color: ???);
BEGIN
  CASE color OF
    1:
    forward(len); (* color = ffffff *)
  |
    2:
    forward(len); (* color = ff8080 *)
  |
    3:
    forward(len); (* color = ffff80 *)
  |
    4:
    forward(len); (* color = 80ff80 *)
  |
    5:
    forward(len); (* color = 80ffff *)
  |
    6:
    forward(len); (* color = 0080ff *)
  |
    7:
    forward(len); (* color = ff80c0 *)
  |
    8:
    forward(len); (* color = c0c0c0 *)
  |
    9:
    forward(len); (* color = ff8000 *)
  |
    10:
    forward(len); (* color = 8080ff *)
  |
  END;
END forward;

PROCEDURE letterA*(h: ???; colorNo: ???);
(*
 * Draws letter A in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: LONGREAL;
BEGIN
  width := h/2.0;
  hypo := sqrt(h*h + width*width/4.0);
  rotAngle := toDegrees(atan(width/2.0/h));
  right(rotAngle);
  forward(hypo/2.0, colorNo);
  right(90 - rotAngle);
  forward(width/2.0, colorNo);
  penUp();
  backward(width/2.0); (* color = ffffff *)
  penDown();
  left(90 - rotAngle);
  forward(hypo/2.0, colorNo);
  left(2*rotAngle);
  forward(-hypo, colorNo);
  right(rotAngle);
END letterA;

PROCEDURE letterE*(h: ???; colorNo: ???);
(*
 * Draws letter E in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  forward(h, colorNo);
  right(90);
  forward(width, colorNo);
  right(90);
  penUp();
  forward(h/2.0); (* color = ffffff *)
  right(90);
  penDown();
  forward(width, colorNo);
  left(90);
  penUp();
  forward(h/2.0); (* color = ffffff *)
  left(90);
  penDown();
  forward(width, colorNo);
  left(90);
END letterE;

PROCEDURE letterF*(h: ???; colorNo: ???);
(*
 * Draws letter F in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  forward(h, colorNo);
  right(90);
  forward(width, colorNo);
  right(90);
  penUp();
  forward(h/2.0); (* color = ffffff *)
  right(90);
  penDown();
  forward(width, colorNo);
  left(90);
  penUp();
  forward(h/2.0); (* color = ffffff *)
  left(90);
  forward(width); (* color = ffffff *)
  penDown();
  left(90);
END letterF;

PROCEDURE letterH*(h: ???; colorNo: ???);
(*
 * Draws letter H in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  forward(h, colorNo);
  penUp();
  right(90);
  forward(width); (* color = ffffff *)
  right(90);
  penDown();
  forward(h/2.0, colorNo);
  right(90);
  forward(width, colorNo);
  penUp();
  backward(width); (* color = ffffff *)
  left(90);
  penDown();
  forward(h/2.0, colorNo);
  left(180);
END letterH;

PROCEDURE letterI*(h: ???; colorNo: ???);
(*
 * Draws letter I in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Cathetus of the corner triangle outside the octagon *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Octagon edge length *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Cathetus of the corner triangle outside the octagon *)
  c := b / sqrt(2.0);
  penUp();
  right(90);
  forward(c); (* color = ffffff *)
  penDown();
  forward(b, colorNo);
  penUp();
  backward(b/2.0); (* color = ffffff *)
  left(90);
  penDown();
  forward(h, colorNo);
  penUp();
  right(90);
  backward(b/2.0); (* color = ffffff *)
  penDown();
  forward(b, colorNo);
  penUp();
  forward(b/2 + c); (* color = ffffff *)
  left(90);
  backward(h); (* color = ffffff *)
  penDown();
END letterI;

PROCEDURE letterK*(h: ???; colorNo: ???);
(*
 * Draws letter K in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  diag: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  diag := h/sqrt(2.0);
  forward(h, colorNo);
  penUp();
  right(90);
  forward(width); (* color = ffffff *)
  right(135);
  penDown();
  forward(diag, colorNo);
  left(90);
  forward(diag, colorNo);
  left(135);
END letterK;

PROCEDURE letterL*(h: ???; colorNo: ???);
(*
 * Draws letter L in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  forward(h, colorNo);
  penUp();
  backward(h); (* color = ffffff *)
  right(90);
  penDown();
  forward(width, colorNo);
  left(90);
END letterL;

PROCEDURE letterM*(h: ???; colorNo: ???);
(*
 * Draws letter M in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  hypo := sqrt(width*width + h*h)/2.0;
  rotAngle := toDegrees(atan(width/h));
  forward(h, colorNo);
  left(rotAngle);
  forward(-hypo, colorNo);
  right(2*rotAngle);
  forward(hypo, colorNo);
  left(rotAngle);
  forward(-h, colorNo);
END letterM;

PROCEDURE letterN*(h: ???; colorNo: ???);
(*
 * Draws letter N in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: LONGREAL;
BEGIN
  width := h/2.0;
  hypo := sqrt(width*width + h*h);
  rotAngle := toDegrees(atan(width/h));
  forward(h, colorNo);
  left(rotAngle);
  forward(-hypo, colorNo);
  right(rotAngle);
  forward(h, colorNo);
  penUp();
  backward(h); (* color = ffffff *)
  penDown();
END letterN;

PROCEDURE letterT*(h: ???; colorNo: ???);
(*
 * Draws letter T in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  penUp();
  forward(h); (* color = ffffff *)
  penDown();
  right(90);
  forward(width, colorNo);
  penUp();
  backward(width/2.0); (* color = ffffff *)
  penDown();
  right(90);
  forward(h, colorNo);
  left(90);
  penUp();
  forward(width/2.0); (* color = ffffff *)
  penDown();
  left(90);
END letterT;

PROCEDURE letterV*(h: ???; colorNo: ???);
(*
 * Draws letter V in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: LONGREAL;
BEGIN
  width := h/2.0;
  hypo := sqrt(h*h + width*width/4.0);
  rotAngle := toDegrees(atan(width/2.0/h));
  penUp();
  forward(h); (* color = ffffff *)
  left(rotAngle);
  penDown();
  forward(-hypo, colorNo);
  right(2*rotAngle);
  forward(hypo, colorNo);
  penUp();
  left(rotAngle);
  backward(h); (* color = ffffff *)
  penDown();
END letterV;

PROCEDURE letterW*(h: ???; colorNo: ???);
(*
 * Draws letter W in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width_3: ???;	(* FIXME! *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: LONGREAL;
BEGIN
  width := h/2.0;
  width_3 := width/3.0;
  hypo := sqrt(width_3*width_3 + h*h);
  rotAngle := toDegrees(atan(width_3/h));
  penUp();
  forward(h); (* color = ffffff *)
  left(rotAngle);
  penDown();
  forward(-hypo, colorNo);
  right(2*rotAngle);
  forward(hypo, colorNo);
  penUp();
  left(90+rotAngle);
  forward(width_3); (* color = ffffff *)
  right(90-rotAngle);
  penDown();
  forward(-hypo, colorNo);
  right(2*rotAngle);
  forward(hypo, colorNo);
  penUp();
  left(rotAngle);
  backward(h); (* color = ffffff *)
  penDown();
END letterW;

PROCEDURE letterX*(h: ???; colorNo: ???);
(*
 * Draws letter X in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: LONGREAL;
BEGIN
  width := h/2.0;
  hypo := sqrt(width*width + h*h);
  rotAngle := toDegrees(atan(width/h));
  right(rotAngle);
  forward(hypo, colorNo);
  penUp();
  left(90+rotAngle);
  forward(width); (* color = ffffff *)
  right(90-rotAngle);
  penDown();
  forward(-hypo, colorNo);
  right(rotAngle);
END letterX;

PROCEDURE letterY*(h: ???; colorNo: ???);
(*
 * Draws letter Y in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: ???;	(* FIXME! *)
BEGIN
  width := h/2.0;
  hypo := sqrt(width*width + h*h)/2.0;
  rotAngle := toDegrees(atan(width/h));
  penUp();
  forward(h); (* color = ffffff *)
  left(rotAngle);
  penDown();
  forward(-hypo, colorNo);
  right(rotAngle);
  penUp();
  backward(h/2.0); (* color = ffffff *)
  penDown();
  forward(h/2.0, colorNo);
  right(rotAngle);
  forward(hypo, colorNo);
  left(rotAngle);
  penUp();
  backward(h); (* color = ffffff *)
  penDown();
END letterY;

PROCEDURE letterZ*(h: ???; colorNo: ???);
(*
 * Draws letter Z in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle: LONGREAL;
  hypo: LONGREAL;
BEGIN
  width := h/2.0;
  hypo := sqrt(width*width + h*h);
  rotAngle := toDegrees(atan(width/h));
  penUp();
  forward(h); (* color = ffffff *)
  right(90);
  penDown();
  forward(width, colorNo);
  left(90-rotAngle);
  forward(-hypo, colorNo);
  right(90-rotAngle);
  forward(width, colorNo);
  left(90);
END letterZ;

PROCEDURE polygonPart*(a: LONGREAL; n: INTEGER; ctrclkws: BOOLEAN; nEdges, color: INTEGER);
(*
 * Draws nEdges edges of a regular n-polygon with edge length a
 * counter-clockwise, if ctrclkws is true, or clockwise if ctrclkws is false.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  rotAngle: ???;	(* FIXME! *)
  k: INTEGER;
BEGIN
  rotAngle := 360.0/n;
  IF ctrclkws THEN
    rotAngle := -rotAngle;
  END;
  FOR k := 1 TO nEdges DO
    right(rotAngle);
    forward(a, color);
  END;
END polygonPart;

PROCEDURE charDummy*(h: ???; colorNo: ???);
(*
 * Draws a dummy character (small centered square) with font height h and
 * the colour encoded by colorNo
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  d: ???;	(* FIXME! *)
  (* Cathetus of the corner triangle outside the octagon *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length (here: edge lengzh of the square) *)
  b: ???;	(* FIXME! *)
BEGIN
  width := h / 2.0;
  (* Octagon edge length (here: edge lengzh of the square) *)
  b := width / (sqrt(2.0) + 1);
  (* Cathetus of the corner triangle outside the octagon *)
  c := (width - b) / 2.0;
  d := b / sqrt(2.0);
  penUp();
  forward(h/2.0-b/2.0); (* color = ffffff *)
  right(90);
  forward(c); (* color = ffffff *)
  right(90);
  penDown();
  (* Draws the square with edge length b *)
  polygonPart(b, 4, true, 4, colorNo);
  penUp();
  left(90);
  forward(b + c); (* color = ffffff *)
  left(90);
  backward(h/2.0-b/2.0); (* color = ffffff *)
  penDown();
END charDummy;

PROCEDURE comma*(h: ???; colorNo: ???);
(*
 * Draws a comma in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  rotAngle: LONGREAL;
  hypo: ???;	(* FIXME! *)
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  rotAngle := toDegrees(atan(0.5));
  hypo := c * sqrt(1.25);
  penUp();
  right(90);
  forward((c+b)/2.0 + c); (* color = ffffff *)
  penDown();
  (* Counterclockwise draw 3 edges of a square with edge length c *)
  (* in the colour endcoded by colorNo *)
  polygonPart(c, 4, true, 3, colorNo);
  left(90);
  forward(c/2.0, colorNo);
  right(90);
  forward(c, colorNo);
  left(180 - rotAngle);
  forward(hypo, colorNo);
  penUp();
  right(90 - rotAngle);
  forward((c + b)/2.0); (* color = ffffff *)
  left(90);
  penDown();
END comma;

PROCEDURE exclMk*(h: ???; colorNo: ???);
(*
 * Draws an exclamation mark in the colour encoded by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  width: ???;	(* FIXME! *)
  rotAngle2: LONGREAL;
  (* 360°/8 *)
  rotAngle: INTEGER;
  length2: ???;	(* FIXME! *)
  length1: ???;	(* FIXME! *)
  hypo: LONGREAL;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  width := h/2.0;
  length1 := h - (b+c)/2.0;
  length2 := length1 - 2*c;
  hypo := sqrt(width*width/16.0 + length2*length2);
  (* 360°/8 *)
  rotAngle := 45;
  rotAngle2 := toDegrees(atan(width/4.0/length2));
  penUp();
  forward(length1); (* color = ffffff *)
  right(90);
  forward(width/2.0); (* color = ffffff *)
  left(90 + rotAngle);
  penDown();
  (* Clockwise draw 5 edges of an octagon with edge length b/2 *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b/2.0, 8, false, 5, colorNo);
  right(rotAngle2);
  forward(hypo, colorNo);
  left(2*rotAngle2);
  forward(-hypo, colorNo);
  penUp();
  forward(hypo); (* color = ffffff *)
  right(rotAngle2);
  forward(c); (* color = ffffff *)
  left(90);
  forward(c/2.0); (* color = ffffff *)
  penDown();
  (* Counterclockwise draw all 4 edges of a squarfe with edge length c *)
  (* in the colour endcoded by colorNo *)
  polygonPart(c, 4, false, 4, colorNo);
  penUp();
  forward((c + b)/2.0); (* color = ffffff *)
  left(90);
  backward(c); (* color = ffffff *)
  penDown();
END exclMk;

PROCEDURE fullSt*(h: ???; colorNo: ???);
(*
 * Draws a full stop in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  penUp();
  right(90);
  forward((c+b)/2.0 + c); (* color = ffffff *)
  penDown();
  (* Counterclockwise draw all 4 edges of a squarfe with edge length c *)
  (* in the colour endcoded by colorNo *)
  polygonPart(c, 4, true, 4, colorNo);
  penUp();
  forward((c + b)/2.0); (* color = ffffff *)
  left(90);
  penDown();
END fullSt;

PROCEDURE letterB*(h: ???; colorNo: ???);
(*
 * Draws letter B in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Cathetus of the outer corner triangle of the octagon *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Octagon edge length *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Cathetus of the outer corner triangle of the octagon *)
  c := b / sqrt(2.0);
  forward(h, colorNo);
  right(90);
  forward(c+b, colorNo);
  (* Clockwise draw 4 edges of an octagon with edge length b *)
  polygonPart(b, 8, false, 4, colorNo);
  forward(c, colorNo);
  penUp();
  left(180);
  forward(b + c); (* color = ffffff *)
  penDown();
  (* Clockwise draw 4 edges of an octagon with edge length b *)
  polygonPart(b, 8, false, 4, colorNo);
  forward(c, colorNo);
  penUp();
  left(180);
  forward(b + 2*c); (* color = ffffff *)
  penDown();
  left(90);
END letterB;

PROCEDURE letterC*(h: ???; colorNo: ???);
(*
 * Draws letter C in the colour encoded by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Cathetus of the outer trinagle at the octagon corner *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Octagon edge length *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Cathetus of the outer trinagle at the octagon corner *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  right(180);
  (* Clockwise draws 3 edges of an octagon with edge length b in the colour *)
  (* encoded by colorNo *)
  polygonPart(b, 8, true, 3, colorNo);
  left(rotAngle);
  penUp();
  forward(2*b + 2*c); (* color = ffffff *)
  penDown();
  (* Counterclockwise draws 4 edges of an octagon with edge length b *)
  (* iin the colour encoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(b + 2*c, colorNo);
  penUp();
  forward(c); (* color = ffffff *)
  left(90);
  forward(b + 2*c, colorNo);
  penDown();
  left(90);
END letterC;

PROCEDURE letterD*(h: ???; colorNo: ???);
(*
 * Draws letter D in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  forward(h, colorNo);
  right(90);
  forward(c+b, colorNo);
  (* Clockwise draw 2 edges of an octagon with edge length b in the colour *)
  (* encoded by colorNo *)
  polygonPart(b, 8, false, 2, colorNo);
  forward(b + 2*c, colorNo);
  (* Clockwise draw 2 edges of an octagon with edge length b in the colour *)
  (* encoded by colorNo *)
  polygonPart(b, 8, false, 2, colorNo);
  forward(c, colorNo);
  penUp();
  left(180);
  forward(b + 2*c); (* color = ffffff *)
  penDown();
  left(90);
END letterD;

PROCEDURE letterG*(h: ???; colorNo: ???);
(*
 * Draws letter G in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Cathetus of the corner triangle outside the octagon. *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Octagon edge length *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Cathetus of the corner triangle outside the octagon. *)
  c := b / sqrt(2.0);
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  right(180);
  (* Counterclockwise draw 4 edges of an octagon with edge length b in *)
  (* the colour encoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(c, colorNo);
  left(90);
  forward(b/2.0 + c, colorNo);
  penUp();
  backward(b/2.0 + c); (* color = ffffff *)
  right(90);
  forward(b + c); (* color = ffffff *)
  penDown();
  (* Counterclockwise draw 4 edges of an octagon with edge length b in *)
  (* the colour encoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(b + 2*c, colorNo);
  penUp();
  forward(c); (* color = ffffff *)
  left(90);
  forward(b + 2*c, colorNo);
  penDown();
  left(90);
END letterG;

PROCEDURE letterJ*(h: ???; colorNo: ???);
(*
 * Draws letter J in colour encoded by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  right(180);
  (* Counterclockwise draw 3 edges of an octagon with edge length b in *)
  (* the colour encoded by colorNo *)
  polygonPart(b, 8, true, 3, colorNo);
  left(rotAngle);
  forward(h - c, colorNo);
  penUp();
  backward(h); (* color = ffffff *)
  penDown();
END letterJ;

PROCEDURE letterO*(h: ???; colorNo: ???);
(*
 * Draws letter O in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Cathetus of the corner triangle outside the octagon *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Octagon edge length *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Cathetus of the corner triangle outside the octagon *)
  c := b / sqrt(2.0);
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  right(180);
  (* Counterclockwise draw 4 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(b + 2*c, colorNo);
  (* Counterclockwise draw 4 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(b + 2*c, colorNo);
  penUp();
  forward(c); (* color = ffffff *)
  left(90);
  forward(b + 2*c); (* color = ffffff *)
  penDown();
  left(90);
END letterO;

PROCEDURE letterP*(h: ???; colorNo: ???);
(*
 * Draws letter P in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* Cathetus of the corner triangle outside the octagon *)
  c: ???;	(* FIXME! *)
  (* Octagon edge length *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Octagon edge length *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Cathetus of the corner triangle outside the octagon *)
  c := b / sqrt(2.0);
  forward(h, colorNo);
  right(90);
  forward(c+b, colorNo);
  (* Clockwise draw 4 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, false, 4, colorNo);
  forward(c, colorNo);
  penUp();
  backward(b + 2*c); (* color = ffffff *)
  left(90);
  forward(b + 2*c); (* color = ffffff *)
  penDown();
  left(180);
END letterP;

PROCEDURE letterQ*(h: ???; colorNo: ???);
(*
 * Draws letter Q in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  right(180);
  (* Counterclockwise draw 4 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(b + 2*c, colorNo);
  (* Counterclockwise draw 4 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, true, 4, colorNo);
  forward(b + 2*c, colorNo);
  penUp();
  forward(c); (* color = ffffff *)
  left(90);
  forward(b + 2*c); (* color = ffffff *)
  right(rotAngle);
  backward(b); (* color = ffffff *)
  penDown();
  forward(b, colorNo);
  left(90 + rotAngle);
END letterQ;

PROCEDURE letterR*(h: ???; colorNo: ???);
(*
 * Zeichnet den Buchstaben R von der Turtleposition aus
 * mit Zeilenhöhe h
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  forward(h, colorNo);
  right(90);
  forward(c+b, colorNo);
  (* Clockwise draw 4 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, false, 4, colorNo);
  forward(c, colorNo);
  left(90 + rotAngle);
  forward(sqrt(2.0)*(b + 2*c), colorNo);
  left(90 + rotAngle);
END letterR;

PROCEDURE letterS*(h: ???; colorNo: ???);
(*
 * Draws letter S in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  right(180);
  (* Counterclockwise draw 6 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, true, 6, colorNo);
  (* Clockwise draw 5 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, false, 5, colorNo);
  right(rotAngle);
  penUp();
  forward(2*b + 3*c); (* color = ffffff *)
  penDown();
  left(180);
END letterS;

PROCEDURE letterU*(h: ???; colorNo: ???);
(*
 * Draws letter U in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* edge length of a regular octagon *)
  b: ???;	(* FIXME! *)
BEGIN
  (* edge length of a regular octagon *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  penUp();
  forward(c); (* color = ffffff *)
  penDown();
  forward(h - c, colorNo);
  penUp();
  backward(h-c); (* color = ffffff *)
  penDown();
  right(180);
  (* Counterclockwise draw 3 edges of an octagoin with edge length b in colour specified by colorNo *)
  polygonPart(b, 8, true, 3, colorNo);
  left(rotAngle);
  forward(h - c, colorNo);
  penUp();
  backward(h); (* color = ffffff *)
  penDown();
END letterU;

PROCEDURE qstnMk*(h: ???; colorNo: ???);
(*
 * Draws a question mark in colour specified by colorNo with font height h
 * from the current turtle position.
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  (* 360°/8 *)
  rotAngle: INTEGER;
  (* Eckenlänge außen am Achteck *)
  c: ???;	(* FIXME! *)
  (* Achteck-Kantenlänge *)
  b: ???;	(* FIXME! *)
BEGIN
  (* Achteck-Kantenlänge *)
  b := h * 0.5 / (sqrt(2.0) + 1);
  (* Eckenlänge außen am Achteck *)
  c := b / sqrt(2.0);
  (* 360°/8 *)
  rotAngle := 45;
  penUp();
  forward(h-c); (* color = ffffff *)
  penDown();
  (* Counterclockwise draw 5 edges of an octagon with edge length b *)
  (* in the colour endcoded by colorNo *)
  polygonPart(b, 8, false, 5, colorNo);
  forward(c, colorNo);
  left(rotAngle);
  forward(b/2.0, colorNo);
  penUp();
  forward(c); (* color = ffffff *)
  left(90);
  forward(c/2.0); (* color = ffffff *)
  penDown();
  (* Counterclockwise draw all 4 edges of a squarfe with edge length c *)
  (* in the colour endcoded by colorNo *)
  polygonPart(c, 4, false, 4, colorNo);
  penUp();
  forward((c + b)/2.0); (* color = ffffff *)
  left(90);
  backward(c); (* color = ffffff *)
  penDown();
END qstnMk;

PROCEDURE drawText*(text: ARRAY 100 OF CHAR; h, c: INTEGER);
(*
 * Has the turtle draw the given string 'text´ with font height 'h´ (in
 * pixels) and the colour coded by integer 'c´ from the current Turtle
 * position to the Turtle canvas. If the turtle looks North then
 * the text will be written rightwards. In the event, the turtle will be
 * placed behind the text in original orientation (such that the next text
 * would be written like a continuation. Colour codes:
 * 1 = black
 * 2 = red
 * 3 = yellow
 * 4 = green
 * 5 = cyan
 * 6 = blue
 * 7 = pink
 * 8 = grey
 * 9 = orange
 * 10 = violet
 * All letters (ASCII) will be converted to uppercase, digits cannot
 * be represented, the set of representable special characters is:
 * '.', ',', '!', '?'. Other characters will be shown as a small
 * centred square (dummy character).
 *)
VAR
  (* TODO: check and accomplish variable declarations *)
  letter: ARRAY 100 OF CHAR;
  k: INTEGER;
  gap: ???;	(* FIXME! *)
BEGIN
  gap := h/10.0;
  FOR k := 1 TO length(text) DO
    letter := CAP(copy(text, k, 1));
    IF letter = "," THEN
      comma(h,c);
    END
    ELSE
      (* "," cannot be chacked against because the comma is misinterpreted *)
      (* as selector list separator. *)
      CASE letter OF
        "A":
        letterA(h,c);
      |
        "B":
        letterB(h,c);
      |
        "C":
        letterC(h,c);
      |
        "D":
        letterD(h,c);
      |
        "E":
        letterE(h,c);
      |
        "F":
        letterF(h,c);
      |
        "G":
        letterG(h,c);
      |
        "H":
        letterH(h,c);
      |
        "I":
        letterI(h,c);
      |
        "J":
        letterJ(h,c);
      |
        "K":
        letterK(h,c);
      |
        "L":
        letterL(h,c);
      |
        "M":
        letterM(h,c);
      |
        "N":
        letterN(h,c);
      |
        "O":
        letterO(h,c);
      |
        "P":
        letterP(h,c);
      |
        "Q":
        letterQ(h,c);
      |
        "R":
        letterR(h,c);
      |
        "S":
        letterS(h,c);
      |
        "T":
        letterT(h,c);
      |
        "U":
        letterU(h,c);
      |
        "V":
        letterV(h,c);
      |
        "W":
        letterW(h,c);
      |
        "X":
        letterX(h,c);
      |
        "Y":
        letterY(h,c);
      |
        "Z":
        letterZ(h,c);
      |
        " ":
        blank(h,c);
      |
        "!":
        exclMk(h,c);
      |
        "?":
        qstnMk(h,c);
      |
        ".":
        fullSt(h,c);
      |
        ELSE
          charDummy(h,c);
      END;
    END;
    right(90);
    penUp();
    forward(gap); (* color = ffffff *)
    penDown();
    left(90);
  END;
END drawText;

BEGIN
  In.Open;
  Out.Open;
  Out.String("This is a demo program for text writing with Turleizer.");
  Out.Ln;
  showTurtle();
  penDown();
  y := 0;
  REPEAT
    (* TODO: Replace "TYPE" by the the actual In procedure name for this type! *)
    Out.String("Enter some text (empty string to exit)"); In.TYPE(text);
    (* Make sure the content is interpreted as string *)
    text := "" + text;
    IF text # "" THEN
      REPEAT
        (* TODO: Replace "TYPE" by the the actual In procedure name for this type! *)
        Out.String("Height of the text (pixels)"); In.TYPE(height);
      UNTIL height >= 5;
      REPEAT
        (* TODO: Replace "TYPE" by the the actual In procedure name for this type! *)
        Out.String("Colour (1=black, 2=red, 3=yellow, 4=green, 5=cyan, 6=blue, 7=pink, 8=gray, 9=orange, 10=violet)"); In.TYPE(colour);
      UNTIL colour >= 1 & colour <= 10;
      y := y + height + 2;
      gotoXY(0, y - 2);
      drawText(text, height, colour);
    END;
  UNTIL text = "";
  gotoXY(0, y + 15);
  drawText("Thank you, bye.", 10, 4);
  hideTurtle();
END TextDemo.
